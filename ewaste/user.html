<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>E-Waste Dashboard</title>
  
  <!-- ‚úÖ Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- ‚úÖ Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #f0f4f8, #e2e8f0);
      transition: background 0.5s ease, color 0.5s ease;
    }

    /* Dark mode */
    .dark {
      background: linear-gradient(135deg, #1a202c, #2d3748);
      color: #e2e8f0;
    }

    h2 {
      @apply text-lg font-semibold mb-4;
    }

    /* Table enhancements */
    table tbody tr:nth-child(odd) {
      background-color: #f9fafb;
    }
    .dark table tbody tr:nth-child(odd) {
      background-color: #2d3748;
    }
    table tbody tr:hover {
      background-color: #edf2f7;
      transition: 0.3s;
    }
    .dark table tbody tr:hover {
      background-color: #4a5568;
    }

    /* Floating button glow */
    #chatbot-toggle {
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.6); }
      70% { box-shadow: 0 0 0 15px rgba(16, 185, 129, 0); }
      100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
    }
  </style>
</head>
<body class="p-6">
  <!-- Header -->
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold text-blue-700 dark:text-green-400">üëã Welcome, User!</h1>
    <div class="flex gap-2">
      <button onclick="toggleTheme()" class="px-4 py-2 rounded-lg bg-gray-700 text-white hover:bg-gray-800 transition">
        üåó Toggle Mode
      </button>
      <a href="index.html">
        <button class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition">üè† Home</button>
      </a>
    </div>
  </div>

  <!-- Calculator -->
  <h2 class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow-md">‚öôÔ∏è E-Waste Calculator</h2>
  <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg mb-6 transition">
    <label class="block font-medium">üìÇ Product Category</label>
    <select id="categorySelect" onchange="updateProducts()" 
      class="w-full mt-2 mb-4 p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-blue-400 transition"></select>

    <label class="block font-medium">üì¶ Product Name</label>
    <select id="productSelect" 
      class="w-full mt-2 mb-4 p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-blue-400 transition"></select>

    <label class="block font-medium">‚öñÔ∏è Weight of Product (kg)</label>
    <input type="number" id="weightInput" placeholder="Enter weight in kg" 
      class="w-full mt-2 mb-4 p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-green-400 transition">

    <button onclick="addProduct()" 
      class="px-6 py-3 rounded-lg bg-green-600 text-white hover:bg-green-700 shadow-md transition">‚ûï Add</button>
  </div>

  <!-- Table -->
  <h2 class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow-md">üìä Calculation Table</h2>
  <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg transition">
    <table class="w-full border-collapse">
      <thead>
        <tr class="bg-gray-100 dark:bg-gray-700">
          <th class="py-3 px-4">S.No</th>
          <th class="py-3 px-4">Product Name</th>
          <th class="py-3 px-4">Weight (kg)</th>
          <th class="py-3 px-4">CO‚ÇÇ Saved (kg)</th>
          <th class="py-3 px-4">Cash Back (‚Çπ)</th>
        </tr>
      </thead>
      <tbody id="productTable"></tbody>
      <tfoot>
        <tr class="font-bold bg-gray-200 dark:bg-gray-600">
          <td colspan="2" class="py-3 px-4">Total</td>
          <td id="totalWeight" class="py-3 px-4">0</td>
          <td id="totalCO2" class="py-3 px-4">0</td>
          <td id="totalCash" class="py-3 px-4">0</td>
        </tr>
      </tfoot>
    </table>
  </div>

  <!-- Chatbot -->
  <button id="chatbot-toggle" 
    class="fixed bottom-5 right-5 bg-green-600 text-white p-4 rounded-full shadow-lg z-50 hover:bg-green-700 transition">
    <i class="fas fa-comments text-xl"></i>
  </button>

  <iframe id="chatbot-frame" 
    src="chatgpt.html" 
    class="fixed bottom-20 right-5 w-[400px] h-[600px] border-0 shadow-lg rounded-lg z-50 hidden"></iframe>

  <script>
    // Dark mode toggle
    function toggleTheme() {
      document.body.classList.toggle("dark");
    }

    // Product options
    const productOptions = {
      "Large Appliances": ["Refrigerator", "Washing Machine", "Air Conditioner"],
      "Small Appliances": ["Mixer", "Toaster", "Electric Kettle"],
      "IT & Telecom": ["Laptop", "Desktop CPU", "Mobile Phone", "Tablet"],
      "Consumer Electronics": ["Television", "CRT Monitor", "Set-top Box"],
      "Lighting Equipment": ["LED Bulb", "Tube Light"],
      "Electrical Tools": ["Electric Drill", "Soldering Iron"],
      "Toys": ["Remote-Controlled Car", "Electronic Toy"],
      "Medical Devices": ["Glucometer", "Digital Thermometer"],
      "Monitoring Devices": ["CCTV Camera", "Door Alarm"],
      "Batteries & Cables": ["Power Bank", "USB Cable"]
    };

    function updateProducts() {
      const category = document.getElementById("categorySelect").value;
      const productSelect = document.getElementById("productSelect");
      productSelect.innerHTML = "";
      if (productOptions[category]) {
        productOptions[category].forEach(p => {
          const opt = document.createElement("option");
          opt.value = opt.text = p;
          productSelect.appendChild(opt);
        });
      }
    }

    let row = 0, totalWeight = 0, totalCO2 = 0, totalCash = 0;

    function addProduct() {
      const category = document.getElementById("categorySelect").value;
      const product = document.getElementById("productSelect").value;
      const weight = parseFloat(document.getElementById("weightInput").value);

      if (!category || !product || isNaN(weight)) {
        return alert("Please select a category, product, and enter weight");
      }

      const co2 = weight * 1.2;
      const cash = weight * 5;

      row++;
      totalWeight += weight;
      totalCO2 += co2;
      totalCash += cash;

      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td class="py-2 px-4">${row}</td>
        <td class="py-2 px-4">${product} <br><small class="text-gray-500 dark:text-gray-400">(${category})</small></td>
        <td class="py-2 px-4">${weight.toFixed(1)}</td>
        <td class="py-2 px-4">${co2.toFixed(1)}</td>
        <td class="py-2 px-4">${cash.toFixed(0)}</td>`;
      document.getElementById("productTable").appendChild(tr);

      document.getElementById("totalWeight").textContent = totalWeight.toFixed(1);
      document.getElementById("totalCO2").textContent = totalCO2.toFixed(1);
      document.getElementById("totalCash").textContent = totalCash.toFixed(0);

      // reset
      document.getElementById("categorySelect").value = "";
      document.getElementById("productSelect").innerHTML = "";
      document.getElementById("weightInput").value = "";
    }

    // Chatbot toggle
    const toggleBtn = document.getElementById("chatbot-toggle");
    const chatbotFrame = document.getElementById("chatbot-frame");
    toggleBtn.addEventListener("click", () => chatbotFrame.classList.toggle("hidden"));
  </script>
</body>
</html>
